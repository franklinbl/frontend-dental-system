<div class="mb-4 flex justify-between items-center">
  <button
    (click)="goToPreviousMonth()"
    class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition cursor-pointer">
    Anterior
  </button>
  <h3 class="font-semibold text-lg">
    {{ getMonthName(this.currentMonth) }} {{ this.currentYear }}
  </h3>
  <button
    (click)="goToNextMonth()"
    class="px-3 py-1 bg-gray-200 rounded hover:bg-gray-300 transition cursor-pointer">
    Siguiente
  </button>
</div>

<!-- Días de la semana -->
<div class="grid grid-cols-7 gap-2 text-center font-semibold mb-2">
  <div>Lun</div><div>Mar</div><div>Mie</div><div>Jue</div><div>Vie</div><div>Sáb</div><div>Dom</div>
</div>

<!-- Cuadrícula de días -->
<div class="grid grid-cols-7 gap-2 text-sm">
  <!-- Generamos los días -->
  @for(index of calendarDays; track index) {
    <ng-container>
      <!-- Índice del día actual -->
      @if(shouldRenderEmptyCell(index, currentMonth, currentYear)) {
        <div class="h-20 border"></div>
      }

      <!-- Día real -->
      @if(isDayInMonth(index, currentMonth, currentYear)) {
        <div
          class="border p-1 min-h-[80px] hover:bg-gray-100 cursor-pointer"
          (click)="selectDate(getDayNumber(index, currentMonth, currentYear))">

          <span class="font-medium">
            {{ getDayNumber(index, currentMonth, currentYear) }}
          </span>

          <!-- Mostrar número de citas -->
          @if(hasAppointments(index, currentMonth, currentYear)) {
            <div class="mt-1 text-xs bg-blue-100 text-blue-800 px-1 rounded-full">
              {{ countAppointments(index, currentMonth, currentYear) }}
            </div>
          }
        </div>
      }
    </ng-container>
  }
</div>